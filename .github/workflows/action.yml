name: "Build, test and pack WebExtension"

on:
  push:
    branches:
      - master

jobs:
  Validate-json-and-zip:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    steps:
      - uses: actions/checkout@v3

      - name: Pack directory to zip
        uses: cardinalby/webext-buildtools-pack-extension-dir-action@v1
        with:
          extensionDir: ${{ secrets.EXTENSION_DIR }}
          zipFilePath: ${{ secrets.ZIP_FILE_PATH }}
